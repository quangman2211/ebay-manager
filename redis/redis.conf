# Redis Configuration for eBay Manager
# Following YAGNI principles - essential configuration only

# Network and Security
bind 0.0.0.0
port 6379
protected-mode yes

# Memory Management (configured for 30-account scale)
maxmemory 512mb
maxmemory-policy allkeys-lru
maxmemory-samples 5

# Persistence Configuration
save 900 1    # Save after 900 seconds if 1+ keys changed
save 300 10   # Save after 300 seconds if 10+ keys changed  
save 60 10000 # Save after 60 seconds if 10000+ keys changed

# Append Only File
appendonly yes
appendfsync everysec
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# Slow Log
slowlog-log-slower-than 10000  # Log queries slower than 10ms
slowlog-max-len 128

# Client Settings
timeout 300
tcp-keepalive 60

# Logging
loglevel notice
logfile ""  # Log to stdout in Docker

# Database Count
databases 16

# Disable dangerous commands in production
# rename-command FLUSHALL ""
# rename-command FLUSHDB ""
# rename-command CONFIG ""